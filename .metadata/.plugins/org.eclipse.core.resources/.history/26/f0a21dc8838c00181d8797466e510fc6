/*
 * generated by Xtext 2.14.0
 */
package com.ufcg.compiler.validation

import org.eclipse.xtext.validation.Check
import com.ufcg.compiler.go.VarDecl
import com.ufcg.compiler.go.LITERAIS_BASICOS
import com.ufcg.compiler.go.GoPackage
import java.util.HashMap
import java.util.ArrayList
import java.util.List
import com.ufcg.compiler.go.Init

/**
 * This class contains custom validation rules. 
 *
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class GoValidator extends AbstractGoValidator {
	
	private var variaveis = new HashMap<String, String>();
	
	public static class Function{
  		public int param_number = 0;
  		public List<String> params_types = new ArrayList<String>();
  		public String retType;
  		public String name;
  	}
  
 	private var functions = <String, Function>newHashMap();
	
	@Check
	def restart(Init init) {
		variaveis.clear();
		functions.clear();
	}
	
	@Check
	def checaVariavelDeclaradaSemInicializar(VarDecl varDecl) {
		if (varDecl.expressao === null) {
			warning("Variável declara sem inicialização", null)
		}
	}
	

//	@Check
//	def testaSeVarComTipoRecebeTipoCerto(VarDecl varDecl) {
//		if (varDecl.type !== null) {
//			if (varDecl.type == "string") {
//				if (varDecl.expressao instanceof LITERAIS_BASICOS) {
//					error("Erro sintático", GoPackage.Literals.VAR_DECL__EXPRESSAO)
//				}
//			}
//		}
//	}

	
}
